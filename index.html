<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Text to HTML element</title>
  </head>
  <body style="font-family: 'Inter', sans-serif; margin: 0; padding: 1rem">
    <h1
      id="heading"
      style="color: #000000e5; font-size: 0.6875rem; line-height: 1rem"
    >Selected text</h1>
    <div
      id="text"
      style="
        border-radius: 0.25rem;
        border-style: solid;
        border-width: 1px;
        font-size: 0.875rem;
        max-height: 20rem;
        overflow: scroll;
        padding: 0.75rem 1rem;
      "
    ></div>
    <button
      id="button"
      style="
        appearance: none;
        background-color: #0d99ff;
        border: none;
        border-radius: 0.5rem;
        color: #fff;
        cursor: pointer;
        font-family: inherit;
        font-size: 0.6875rem;
        font-weight: 600;
        line-height: 1rem;
        margin-top: 1rem;
        padding: 0.5rem 1rem;
        width: 100%;
      "
    >
      Copy text
    </button>
    <script>
      const text = document.getElementById("text");
      const button = document.getElementById("button");

      window.addEventListener("message", (event) => {
        const message = event.data.pluginMessage;
        text.innerText = message.text;

        if (event.data.pluginMessage.type === "noText") {
          text.style.backgroundColor = "#f5f5f5";
          text.style.borderColor = "transparent";
          text.style.color = "#999";
          button.style.display = "none";
        } else {
          text.style.backgroundColor = "#fff";
          text.style.borderColor = "#e6e6e6";
          text.style.color = "#212121";
          button.style.display = "block";
        }
      });

      document.getElementById("button").addEventListener("click", () => {
        const area = document.createElement("textarea");
        document.body.appendChild(area);
        area.value = text.innerText;
        area.focus();
        area.select();
        document.execCommand("copy");
        document.body.removeChild(area);

        parent.postMessage({ pluginMessage: { type: "copy" } }, "*");
      });
    </script>
  </body>
</html>
